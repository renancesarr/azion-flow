# IA Change Template — Code-Brain

> Salve como `code-brain/developer/logs-ai-code/<timestamp>-ia-code.md`.
> Cite sempre os IDs envolvidos (`IN-XXXX`, `UC-XXXX`, `T-XXXX`) e os validadores executados.

## 1. Contexto consumido

- context-index.yaml → AGENTS.md → project-guide.md → docs/architecture.md → docs/tasks/tasks-azion-integration.md (TPROVREAL/TAZ) → src/providers/azion/*, src/providers/filesystem/nodefs.ts → src/usecases/deploy/deploy.factory.ts → tests/steps/filesync-flow.real.test.ts.

## 2. Objetivo da alteração

- Evoluir providers para suportar sync real (TAZ-001..017) e conectar defaults na deploy factory (TAZ-018/019), incluindo DTOs, métodos básicos, FS real (list/read) e endpoints/HTTP client placeholders.

## 3. Decisões e justificativas

- Métodos HTTP/storage/application/domain retornam listas vazias/stubs para manter determinismo sem API real.
- NodeFileSystemProvider faz listagem recursiva, ignora ocultos e retorna paths relativos; readFile exposto.
- createDeployUseCase agora instancia providers/services default para rodar steps sem wiring manual.

## 4. Implementação

- Novos arquivos: endpoints/DTOs/http-error (Azion), filesync DTO, integração NodeFS real.
- Providers atualizados: AzionStorage/Application/Domain (métodos list/ensure/get), HttpClient (request/token).
- Deploy factory conecta providers → services → orchestrator/usecase.
- Tasks atualizadas: `docs/tasks/tasks-azion-integration.md` (TAZ-001..021 marcados).

## 5. Revisão humana

- TAZ-019: DeployUseCase já aceita orchestrator via factory; se desejar aceitar steps/services externos adicionais, ajustar assinatura futuramente.
- Métodos HTTP ainda são placeholders; integrar fetch/axios e autenticação real em fase posterior.

## 6. Follow-ups

- Implementar providers reais (TPROVREAL-0xx) com chamadas HTTP e autenticação.
- Rodar `npm test` ao instalar dependências para validar steps/FS diff.

## 7. Next Steps

- Conectar providers reais em services (TSERVREAL) quando endpoints estiverem prontos e adicionar testes de integração com mocks HTTP/FS.
